(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1554:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(6),i=a(7),r=a(17),o=a(8),l=a(9),u=a(4),d=a(0),c=a.n(d),h=a(20),m=a(26),p=a(29),f=a(46),g=a.n(f),b=a(222),v=a(179),w=a(221),y=a(85),P=a(115),S=a(234),j=a(126),E=a.n(j),O=a(27);function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(u.a)(e);if(t){var s=Object(u.a)(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var x=function(e){Object(o.a)(a,e);var t=C(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user:{name:n.props.userName||"",password:"",password_confirmation:"",gitname:n.props.userGithub||"",current_password:""},loading:!1,file:null,name:null},n.handleName=n.handleName.bind(Object(r.a)(n)),n.handlePassword=n.handlePassword.bind(Object(r.a)(n)),n.handlePassConfirmation=n.handlePassConfirmation.bind(Object(r.a)(n)),n.handleGithub=n.handleGithub.bind(Object(r.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(r.a)(n)),n.handleCurrentPassword=n.handleCurrentPassword.bind(Object(r.a)(n)),n.handleSelectedFile=n.handleSelectedFile.bind(Object(r.a)(n)),n.handlePhoto=n.handlePhoto.bind(Object(r.a)(n)),n}return Object(i.a)(a,[{key:"handleName",value:function(e){var t=e,a=this.state.user;this.setState({user:Object(n.a)({},a,{name:t})})}},{key:"handlePhoto",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.file,s=a.name;s&&("png"===s.slice(-3).toLowerCase()||"jpg"===s.slice(-3).toLowerCase()?(this.setState({loading:!0}),this.props.updatePhoto({file:n,name:s}).then(function(e){e.ok&&(t.setState({loading:!1}),t.props.notifySuccess("The photo was updated successfully"))})):this.props.notifyError("Invalid photo format (must be PNG or JPG)"))}},{key:"handleSelectedFile",value:function(e){var t=this;!function(e){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.setState({file:a.result})}}(e.target.files[0]),this.setState({name:e.target.files[0].name})}},{key:"handleGithub",value:function(e){var t=e,a=this.state.user;this.setState({user:Object(n.a)({},a,{gitname:t})})}},{key:"handlePassword",value:function(e){var t=e,a=this.state.user;this.setState({user:Object(n.a)({},a,{password:t})})}},{key:"handleCurrentPassword",value:function(e){var t=e,a=this.state.user;this.setState({user:Object(n.a)({},a,{current_password:t})})}},{key:"handlePassConfirmation",value:function(e){var t=e,a=this.state.user;this.setState({user:Object(n.a)({},a,{password_confirmation:t})})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state.user,n=this.props.selectedLanguage;a.password!==a.password_confirmation?this.props.notifyError(O.a[n].settings.notifyError):this.props.updateUser(a).then(function(e){e.ok&&t.props.notifySuccess(O.a[n].settings.notifySuccess)})}},{key:"render",value:function(){var e=this.state.user,t=this.props,a=t.userProvider,n=t.userImage,s=t.classes,i=t.selectedLanguage;return c.a.createElement("div",{className:s.root},c.a.createElement("div",{className:s.grid},c.a.createElement("div",{className:s.imgCard},c.a.createElement("img",{alt:"avatar",className:s.img,src:n&&"null"!==n?"".concat(n,"?time=").concat((new Date).toString()):E.a}),c.a.createElement(b.a,{className:s.imgForm,encType:"multipart/form-data",onSubmit:this.handlePhoto},c.a.createElement("input",{className:s.imgSelect,onChange:this.handleSelectedFile,type:"file"}),c.a.createElement(w.a,{type:"submit",loading:this.state.loading},O.a[i].settings.uploadPicture))),c.a.createElement("div",null,c.a.createElement(S.a,{className:s.card},c.a.createElement(g.a,{className:s.formTitle,variant:"headline",component:"h2"},O.a[i].settings.editProfile),c.a.createElement(b.a,{onSubmit:this.handleSubmit,className:s.formInput},c.a.createElement(v.a,{onChange:this.handleName,type:"name",value:e.name,fullWidth:!0,label:O.a[i].settings.name,id:"name",autoFocus:!0}),c.a.createElement(v.a,{onChange:this.handleGithub,type:"Github",value:e.gitname,fullWidth:!0,label:O.a[i].settings.github,id:"github"}),c.a.createElement(v.a,{onChange:this.handlePassword,type:"password",disabled:"google_oauth2"===a,value:e.password,fullWidth:!0,label:O.a[i].settings.newPass,id:"Password"}),c.a.createElement(v.a,{onChange:this.handlePassConfirmation,type:"password",value:e.password_confirmation,disabled:"google_oauth2"===a,fullWidth:!0,label:O.a[i].settings.confirmPass,id:"passwordconfirmation"}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(v.a,{onChange:this.handleCurrentPassword,type:"password",value:e.current_password,disabled:"google_oauth2"===a,fullWidth:!0,label:O.a[i].settings.currentPass,id:"currentpassword"}),c.a.createElement(w.a,{type:"submit"},O.a[i].settings.submit))))))}}]),a}(d.Component);x.defaultProps={userName:"",userGithub:""};t.default=Object(m.b)(function(e){return{userName:e.auth.name,userGithub:e.auth.gitname,userProvider:e.auth.provider,userImage:e.auth.image,selectedLanguage:e.user.language}},function(e){return Object(h.b)({notifyError:y.b,notifySuccess:y.c,updateUser:P.j,updatePhoto:P.i},e)})(Object(p.withStyles)({root:{backgroundColor:"#f0f0f0",flex:1,display:"flex",alignItems:"center",flexDirection:"column",padding:"20px"},formTitle:{paddingLeft:"2.5%",paddingTop:"3%"},formInput:{paddingLeft:"5%",paddingRight:"5%",paddingBottom:"5%"},grid:{paddingTop:"2%",display:"flex"},img:{border:"none",position:"relative",height:"200px",width:"200px"},imgForm:{width:"200px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},imgSelect:{width:"100%",textAlign:"center",paddingLeft:"15px",marginTop:"5px",marginBottom:"15px",alignSelf:"center"},card:{width:"100%"},imgCard:{width:"250px"}})(x))}}]);
//# sourceMappingURL=46.d5d28b93.chunk.js.map