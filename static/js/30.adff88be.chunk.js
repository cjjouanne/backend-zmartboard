(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1562:function(e,t,r){"use strict";r.r(t);var n=r(6),a=r(7),o=r(8),c=r(9),i=r(4),s=r(0),u=r.n(s),l=r(20),d=r(26),p=r(123),f=r(622),m=r(18),h=r(17),g=r(29),b=(r(59),r(46)),y=r.n(b),E=(r(665),r(111),r(629),r(942)),T=r(963),v=r.n(T),j=Object(g.withStyles)({box:{display:"flex",borderRadius:"2px",boxSizing:"border-box"},info:{fontSize:"12px"},square:{width:"15px",heigth:"5px",marginRight:"5px"}})(function(e){var t=e.classes,r=e.value,n=e.color,a=e.name;return u.a.createElement("div",{className:t.box},u.a.createElement("div",{className:t.square,style:{backgroundColor:n}}),u.a.createElement(y.a,{className:t.info},a,"\xa0 - Hours: \xa0",u.a.createElement("b",null,r<1?0:r)))}),x=function(e){return u.a.createElement(j,{value:e.data.hours,color:e.color,name:e.label})},C=function(e){var t=e.data,r=t.min_hours,n=t.max_hours,a=v.a.scale(["#7fe8c4","#205e49"]).domain([r,n]);return u.a.createElement(E.ResponsiveTreeMap,{tooltip:x,root:t,identity:"id",value:"hours",innerPadding:3,outerPadding:3,leavesOnly:!0,margin:{top:10,right:10,bottom:10,left:10},label:function(e){return e.name},labelSkipSize:15,labelTextColor:"inherit:darker(3.5)",colorBy:function(e){return function(e,t){return 0===e.depth?"black":1===e.depth?"black":t(e.hours).hex()}(e,a)},borderColor:"inherit:darker(0.3)",animate:!0,motionStiffness:90,motionDamping:11})},S=r(626),O=r(632),_=r(630),k=r(85),D=r(27);function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var I=function(e){Object(o.a)(r,e);var t=R(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={loading:!0,dataTree:[],repos:[],dataTreeCompleted:[],dataTreeUncompleted:[],tasksCompleted:[],tasksUnCompleted:[]},a.changeDataTree=a.changeDataTree.bind(Object(h.a)(a)),a.changeDataTreeCompleted=a.changeDataTreeCompleted.bind(Object(h.a)(a)),a.changeDataTreeUncompleted=a.changeDataTreeUncompleted.bind(Object(h.a)(a)),a.copyClipboard=a.copyClipboard.bind(Object(h.a)(a)),a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.props.changeTrazabilityHours({selectedRepo:this.props.selectedRepo,startDate:this.props.startDate,endDate:this.props.endDate,user:this.props.userId}),this.changeDataTree(this.props.startDate,this.props.endDate,this.props.userId)}},{key:"copyClipboard",value:function(){var e=document.createElement("input");document.body.appendChild(e);var t="".concat(window.location.origin,"/project/").concat(this.props.projectId,"/report/tasks/").concat(this.props.startDate,"/").concat(this.props.endDate,"/").concat(this.props.user);e.setAttribute("value",t),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"changeDataTree",value:function(e,t,r){var n=this;this.setState({dataTree:[],tasksCompleted:[],tasksUnCompleted:[],dataTreeUncompleted:[],dataTreeCompleted:[]});var a=this.props.projectId,o={start_date:e,end_date:t};this.props.fetchVizHoursPerTask(a,r,o).then(function(e){var t=e.ok?e.body:[];n.setState({loading:!1,dataTree:t}),n.changeDataTreeCompleted(n.state.dataTree),n.changeDataTreeUncompleted(n.state.dataTree)})}},{key:"changeDataTreeCompleted",value:function(e){if(e.children&&e.children.length){var t=JSON.parse(JSON.stringify(e)),r=[];t.children.forEach(function(e){var t=[];e.children.forEach(function(e){t.push(e),r.push(e)}),e.children=t.filter(function(e){return e.completed})}),this.setState({dataTreeCompleted:t,tasksCompleted:r.filter(function(e){return e.completed})})}else;}},{key:"changeDataTreeUncompleted",value:function(e){if(e.children&&e.children.length){var t=JSON.parse(JSON.stringify(e)),r=[];t.children.forEach(function(e){var t=[];e.children.forEach(function(e){t.push(e),r.push(e)}),e.children=t.filter(function(e){return!e.completed})}),this.setState({dataTreeUncompleted:t,tasksUnCompleted:r.filter(function(e){return!e.completed})})}else;}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(m.a,null);var e=this.props,t=e.classes,r=e.selectedLanguage,n=this.state,a=n.dataTreeCompleted,o=n.dataTreeUncompleted,c=n.tasksUnCompleted,i=n.tasksCompleted,s=D.a[r].report;return u.a.createElement("div",{className:t.headerContainer},u.a.createElement(y.a,{className:t.title},s.tasks),u.a.createElement("div",{className:t.line}),u.a.createElement("div",{className:t.grid},u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:t.text},s.user,":"," ",this.props.userId)),u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:t.text},s.from,":"," ",this.props.startDate)),u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:t.text},s.to,":"," ",this.props.endDate))),u.a.createElement("div",{className:t.line}),u.a.createElement("div",{className:t.container},u.a.createElement(y.a,{className:t.item2},s.completetasks),u.a.createElement(y.a,{className:t.item2},s.notcompletetasks),u.a.createElement("div",{className:t.item3},u.a.createElement("div",{className:t.container}),i.length>0&&u.a.createElement(C,{data:a,params:[this.props.startDate,this.props.endDate]}),0===i.length&&u.a.createElement(y.a,{className:t.noDataMsg}," ",s.nocompletetasks,"."," ")),u.a.createElement("div",{className:t.item3},u.a.createElement("div",{className:t.container}),0===c.length&&u.a.createElement(y.a,{className:t.noDataMsg}," ",s.nonotcompletetasks,"."," "),c.length>0&&u.a.createElement(C,{data:o,params:[this.props.startDate,this.props.endDate]}))))}}]),r}(s.Component),P=Object(d.b)(function(e,t){return{userId:e.auth.id,users:Object(_.a)(t,e),selectedLanguage:e.user.language}},function(e){return Object(l.b)({fetchVizHoursPerTask:S.i,changeTrazabilityHours:O.d,notifyError:k.b},e)})(Object(g.withStyles)({titleContainer:{display:"block",paddingLeft:20,paddingTop:5,borderBottom:"2px solid rgb(68, 68, 68)"},title:{fontSize:"28px",fontFamiliy:'-apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "Lucida Grande", Arial, sans-serif',color:"rgb(68, 68, 68)"},container:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gridGap:"2px"},item2:{textAlign:"center",width:"500px",gridColumn:"span 1 / auto",float:"center",display:"block",color:"#2a3d41",alignSelf:"center",fontSize:16,fontWeight:"bold",marginTop:"10px",marginRight:"5px",justifyContent:"center"},item3:{height:"500px",width:"500px",gridColumn:"span 1 / auto",float:"center",display:"block"},titleText:{color:"#2a3d41",fontSize:18,fontWeight:"bold",marginTop:"10px",marginBottom:"10px"},headerContainer:{margin:"30px",width:"auto"},text:{color:"#2a3d41",alignSelf:"center",fontSize:14,fontWeight:"bold",marginTop:"10px",marginBottom:"10px",marginRight:"5px"},selectText:{color:"#2a3d41",fontSize:14,fontWeight:"normal",marginTop:"10px",marginBottom:"10px",marginLeft:"10px"},grid:{display:"flex",width:"100%"},line:{width:"auto",height:"1px",backgroundColor:"#CCCCCC"},errorMsg:{marginLeft:"500px",marginTop:"200px",width:"200px",fontFamiliy:'-apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "Lucida Grande", Arial, sans-serif',color:"rgb(68, 68, 68)",fontWeight:"bold"},noDataMsg:{textAlign:"center",width:"500px",gridColumn:"span 1 / auto",marginTop:"250px",marginBottom:"250px",fontFamiliy:'-apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "Lucida Grande", Arial, sans-serif',color:"rgb(68, 68, 68)",fontWeight:"bold"},shareText:{fontSize:12,color:"white",margin:"0px 0px"},shareButton:{margin:5,padding:"0px 8px",borderColor:"white",border:"1px solid #fff",backgroundColor:"#ea5941","&:hover":{backgroundColor:"#ca3921"},color:"#fff",borderRadius:0}})(I));function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var U=function(e){Object(o.a)(r,e);var t=N(r);function r(e){var a;return Object(n.a)(this,r),(a=t.call(this,e)).state={loading:!0},a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.selectProject(this.props.projectId),this.props.fetchProjectMembers(this.props.projectId).then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){return this.state.loading?u.a.createElement(m.a,null):u.a.createElement(s.Fragment,null,u.a.createElement(P,{projectId:this.props.projectId,startDate:this.props.startDate,endDate:this.props.endDate,userId:this.props.userId}))}}]),r}(s.Component);t.default=Object(d.b)(function(e,t){return{projectId:String(t.match.params.id),startDate:String(t.match.params.start_date),endDate:String(t.match.params.end_date),userId:String(t.match.params.user_id)}},function(e){return Object(l.b)({selectProject:p.d,fetchProjectMembers:f.b},e)})(U)},622:function(e,t,r){"use strict";r.d(t,"b",function(){return a}),r.d(t,"d",function(){return o}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return i}),r.d(t,"a",function(){return s}),r.d(t,"c",function(){return u});var n=r(61),a=function(e){return{type:n.c,fetch:!0,url:"/projects/".concat(e,"/members/"),params:{method:"GET"}}},o=function(e,t){return{type:n.e,fetch:!0,url:"/tasks/".concat(e,"/assign/"),params:{method:"POST",body:t}}},c=function(e,t){return{type:n.f,fetch:!0,url:"/tasks/".concat(e,"/users/").concat(t,"/unassign/"),params:{method:"DELETE"}}},i=function(e,t,r){return{type:n.g,fetch:!0,url:"/projects/".concat(e,"/members/").concat(t,"/"),params:{method:"PUT",body:r}}},s=function(e,t){return{type:n.b,fetch:!0,url:"/projects/".concat(e,"/members/").concat(t,"/"),params:{method:"DELETE"}}},u=function(e,t){return{type:n.d,fetch:!0,url:"/projects/".concat(e,"/members/").concat(t,"/"),params:{method:"DELETE"}}}},626:function(e,t,r){"use strict";var n=r(1);r.d(t,"g",function(){return a}),r.d(t,"h",function(){return o}),r.d(t,"j",function(){return c}),r.d(t,"i",function(){return i}),r.d(t,"f",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return l}),r.d(t,"c",function(){return d}),r.d(t,"d",function(){return p}),r.d(t,"a",function(){return f});var a=function(e,t){return{type:"FETCH_VIZ_HOURS_PER_BOARD",fetch:!0,url:"/viz/projects/".concat(e,"/hours_per_board"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},o=function(e,t){return{type:"FETCH_VIZ_HOURS_PER_LABEL",fetch:!0,url:"/viz/boards/".concat(e,"/hours_per_label"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},c=function(e,t){return{type:"FETCH_VIZ_HOURS_PER_USER",fetch:!0,url:"/viz/projects/".concat(e,"/hours_per_user"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},i=function(e,t,r){return{type:"FETCH_VIZ_HOURS_PER_TASK",fetch:!0,url:"/viz/projects/".concat(e,"/users/").concat(t,"/tasks"),params:{method:"GET"},queryParams:Object(n.a)({},r)}},s=function(e,t,r){return{type:"FETCH_VIZ_GITHUB",fetch:!0,url:"/viz/projects/".concat(e,"/users/").concat(t,"/github"),params:{method:"GET"},queryParams:Object(n.a)({},r)}},u=function(e){return{type:"FETCH_VIZ_LINKED_REPOS",fetch:!0,url:"/projects/".concat(e,"/repos"),params:{method:"GET"}}},l=function(e,t){return{type:"FETCH_VIZ_HOURS_TIMELINE",fetch:!0,url:"/viz/projects/".concat(e,"/users_timeline"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},d=function(e,t){return{type:"FETCH_VIZ_PR",fetch:!0,url:"/projects/".concat(e,"/gits/get_pull_requests"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},p=function(e,t){return{type:"FETCH_VIZ_PR_LEAD_TIME",fetch:!0,url:"/projects/".concat(e,"/gits/get_pr_lead_time"),params:{method:"GET"},queryParams:Object(n.a)({},t)}},f=function(e,t){return{type:"FETCH_VIZ_COMMITS_PER_PR",fetch:!0,url:"/projects/".concat(e,"/gits/get_commits_of_all_pr"),params:{method:"GET"},queryParams:Object(n.a)({},t)}}},630:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"e",function(){return u}),r.d(t,"b",function(){return l});var n=r(45),a=r(40),o=function(e){return null!=e?e.ref:null},c=Object(n.b)(a.a,function(e,t){return t.orm},function(e,t){return t.user.selectedProjectId},function(e,t){var r=o(e.Project.get(function(e){return e.id===t}));return null===r?[]:e.Member.filter(function(e){return r.members.includes(e.id)}).orderBy(function(e){return e.name.toUpperCase()}).toRefArray()}),i=Object(n.b)(a.a,function(e,t){return t.orm},function(e,t){return t.board.selectedTask},function(e,t){return t.user.selectedProjectId},function(e,t,r){var n=e.Task.get(function(e){return e.id===t}).ref;if(null===n)return null;var a=n.assigned,o=e.Project.get(function(e){return e.id===r}).ref.members;return e.Member.filter(function(e){return o.includes(e.id)}).orderBy(function(e){return e.name.toUpperCase()}).toRefArray().map(function(e){return Object.assign({},e,{assigned:a.includes(e.id)})})}),s=Object(n.b)(a.a,function(e,t){return t.orm},function(e){return e.taskId},function(e,t){var r=o(e.Task.get(function(e){return e.id===t}));return null===r?null:Object.assign({},{assigned:e.Member.filter(function(e){return r.assigned.includes(e.id)}).toRefArray()}).assigned}),u=Object(n.b)(a.a,function(e,t){return t.orm},function(e,t){return t.board.selectedTask},function(e,t){var r=o(e.Task.get(function(e){return e.id===t}));return null===r?null:Object.assign({},{assigned:e.Member.filter(function(e){return r.assigned.includes(e.id)}).toRefArray()}).assigned}),l=Object(n.b)(a.a,function(e,t){return t.orm},function(e,t){return t.user.selectedProjectId},function(e,t){var r=o(e.Project.get(function(e){return e.id===t}));return null===r?[]:e.Member.filter(function(e){return r.members.includes(e.id)&&"viewer"!==e.role}).orderBy(function(e){return e.name.toUpperCase()}).toRefArray()})},632:function(e,t,r){"use strict";r.d(t,"f",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"e",function(){return i}),r.d(t,"d",function(){return s}),r.d(t,"c",function(){return u}),r.d(t,"g",function(){return l});var n=r(71),a=function(e){return{type:n.d,payload:{body:{id:e}}}},o=function(e){return{type:n.a,payload:{body:e}}},c=function(e){return{type:n.b,payload:{body:e}}},i=function(e){return{type:n.g,payload:{body:e}}},s=function(e){return{type:n.f,payload:{body:e}}},u=function(e){return{type:n.c,payload:{body:e}}},l=function(){return{type:n.e}}}}]);
//# sourceMappingURL=30.adff88be.chunk.js.map