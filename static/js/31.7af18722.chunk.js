(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1563:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(7),c=a(17),o=a(8),s=a(9),l=a(4),i=a(0),u=a.n(i),d=a(20),f=a(26),p=a(46),h=a.n(p),m=a(743),y=a.n(m),g=a(605),b=a(29),v=a(348),x=a.n(v),C=a(86),k=a.n(C),E=a(722),O=a.n(E),j=a(234),S=a(631),_=a.n(S),w=a(225),T=a.n(w),N=a(226),B=a.n(N),P=a(178),F=a.n(P),I=a(85),R=a(126),A=a.n(R),M=a(83),z=function(){return{type:M.b,fetch:!0,url:"/users/index",params:{method:"GET"}}},U=function(e,t){return{type:M.d,fetch:!0,url:"/users/".concat(e,"/max_projects"),params:{method:"POST",body:t}}},$=function(e){return{type:M.a,fetch:!0,url:"/users/".concat(e,"/admin"),params:{method:"POST"}}},D=function(e){return{type:M.c,fetch:!0,url:"/users/".concat(e,"/admin"),params:{method:"DELETE"}}},L=a(45),J=a(111),q=a(40),H=Object(L.b)(q.a,function(e,t){return t.orm},function(e,t){return t.user.search},function(e,t){if(!t)return e.User.all().toRefArray();var a=Object(J.c)(Object(J.f)(t)).filter(Boolean);return e.User.filter(function(e){return a.every(function(t){return Object(J.f)(e.account_type).includes(t)||!(!e.name||!Object(J.f)(e.name).includes(t))})}).toRefArray()});function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var G=function(e){Object(o.a)(a,e);var t=W(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).typeChange=r.typeChange.bind(Object(c.a)(r)),r.maxChange=r.maxChange.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e){if(e.users.length!==this.props.users.length)return!0;for(var t=0;t<e.users.length;t+=1)if(e.users[t]!==this.props.users[t])return!0;return!1}},{key:"typeChange",value:function(e){var t=this,a=e.target,n=a.name;"administrator"===a.value?this.props.fetchAddAdmin(n).then(function(e){e.ok&&t.props.notifySuccess("Updated succesfully")}):this.props.fetchDeleteAdmin(n).then(function(e){e.ok&&t.props.notifySuccess("Updated succesfully")})}},{key:"maxChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value,c=Number(r);this.props.fetchMaxProjects(n,{max_projects:c}).then(function(e){e.ok&&t.props.notifySuccess("Updated succesfully")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.userType,r=t.users,c=t.userName;if("user"===n)return u.a.createElement(g.a,{to:"/"});var o=["super_admin","administrator","user"];return r.sort(function(e,t){return o.indexOf(e.account_type)-o.indexOf(t.account_type)===0?Object(J.f)(e.name)<Object(J.f)(t.name)?-1:Object(J.f)(e.name)>Object(J.f)(t.name)?1:0:o.indexOf(e.account_type)-o.indexOf(t.account_type)}),u.a.createElement(i.Fragment,null,r.map(function(t){return u.a.createElement(i.Fragment,null,u.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"2fr 2fr 1fr",margin:"5px"}},u.a.createElement("div",{style:{display:"flex",flexDirection:"columns"}},u.a.createElement("div",null,(!t.image||"null"===t.image)&&u.a.createElement("img",{alt:"",className:a.customIcon,src:A.a}),t.image&&"null"!==t.image&&u.a.createElement("img",{alt:"",className:a.customIcon,src:t.image})),u.a.createElement(h.a,{className:a.titleText,style:{marginLeft:"5px"}},t.name)),u.a.createElement("div",null,("super_admin"!==n||t.name===c)&&u.a.createElement(h.a,null,t.account_type),"super_admin"===n&&t.name!==c&&u.a.createElement(_.a,{name:t.id,value:t.account_type,onChange:e.typeChange,input:u.a.createElement(B.a,{id:"type"}),style:{width:"130px"}},u.a.createElement(T.a,{value:"user"},"user"),u.a.createElement(T.a,{value:"administrator"},"administrator"))),u.a.createElement("div",{style:{width:"35px",marginLeft:"3"}},u.a.createElement(B.a,{type:"number",min:"0",max:"99",name:t.id,value:t.max_projects,onChange:e.maxChange,step:"1"}))),u.a.createElement(F.a,null))}))}}]),a}(i.Component);var X=Object(f.b)(function(e,t){return{userType:e.auth.accountType,userName:e.auth.name,users:H(t,e)}},function(e){return Object(d.b)({notifyError:I.b,notifySuccess:I.c,fetchAllUsers:z,fetchAddAdmin:$,fetchDeleteAdmin:D,fetchMaxProjects:U},e)})(Object(b.withStyles)({root:{backgroundColor:"#f0f0f0",flex:1,display:"flex",alignItems:"center",flexDirection:"column"},formTitle:{paddingLeft:"2.5%",paddingTop:"3%"},formInput:{paddingLeft:"5%",paddingRight:"5%",paddingBottom:"5%"},grid:{paddingLeft:"2.5%",paddingTop:"2%",display:"grid","grid-template-columns":"repeat(4, 1fr)","grid-gap":"50px"},customIcon:{height:"24px",width:"24px",display:"block","border-radius":"50%"},titleText:{color:"#2a3d41",fontSize:14,fontWeight:"bold"}})(G)),K=a(123);function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var V=function(e){Object(o.a)(a,e);var t=Q(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={sysrec:!1},r.handleChange=r.handleChange.bind(Object(c.a)(r)),r.changeSysrecConfig=r.changeSysrecConfig.bind(Object(c.a)(r)),r}return Object(r.a)(a,[{key:"componentWillMount",value:function(){"user"!==this.props.userType&&this.props.fetchAllUsers()}},{key:"componentDidMount",value:function(){var e=this;fetch("https://lessons.zmartboard.cl/config",{method:"GET"}).then(function(e){return e.ok?e.json():{}}).then(function(t){"0"===t.sys_rec_status?e.setState({sysrec:!1}):"1"===t.sys_rec_status&&e.setState({sysrec:!0})})}},{key:"changeSysrecConfig",value:function(e){var t=this,a="https://lessons.zmartboard.cl/config";switch(e){case!0:fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sys_rec_status:1})}).then(function(e){return e.ok?e.json():{}}).then(function(e){"0"===e.sys_rec_status?t.setState({sysrec:!1}):"1"===e.sys_rec_status&&t.setState({sysrec:!0})});break;case!1:fetch(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({sys_rec_status:0})}).then(function(e){return e.ok?e.json():{}}).then(function(e){"0"===e.sys_rec_status?t.setState({sysrec:!1}):"1"===e.sys_rec_status&&t.setState({sysrec:!0})});break;default:console.error("Error")}}},{key:"handleChange",value:function(e){this.props.userSearch({text:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes;return"user"===t.userType?u.a.createElement(g.a,{to:"/"}):u.a.createElement(j.a,{className:a.container},u.a.createElement("div",{className:a.search},u.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},u.a.createElement("p",null,"Sistema recomendador activo"),u.a.createElement(O.a,{checked:this.state.sysrec,color:"primary",onChange:function(){return e.changeSysrecConfig(!e.state.sysrec)},value:"sysrec-enabled-".concat(this.state.sysrec)})),u.a.createElement("div",{style:{border:"1px solid #5f7a80 ",borderRadius:"5px"}},u.a.createElement(k.a,{placement:"top-start",title:"Search"},u.a.createElement(y.a,{className:a.icon})),u.a.createElement(x.a,{onClick:function(e){return e.stopPropagation()},onChange:function(t){return e.handleChange(t.target.value)},type:"search",placeholder:"Search\u2026"}))),u.a.createElement("div",{className:a.titles},u.a.createElement(h.a,{className:a.titleText},"User"),u.a.createElement(h.a,{className:a.titleText},"Role"),u.a.createElement(h.a,{className:a.titleText},"Max Projects")),u.a.createElement(X,null))}}]),a}(i.Component);t.default=Object(f.b)(function(e){return{userType:e.auth.accountType}},function(e){return Object(d.b)({fetchAllUsers:z,userSearch:K.i},e)})(Object(b.withStyles)({customIcon:{height:"24px",width:"24px",display:"block","border-radius":"50%"},search:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center"},titleText:{color:"#2a3d41",fontSize:15,fontWeight:"bold"},icon:{alignSelf:"center",color:"#2a3d41","&:hover":{color:"#ca3921"},float:"left"},container:{width:"700px",alignSelf:"center",padding:"30px",marginTop:"20px"},titles:{display:"grid",gridTemplateColumns:"2fr 2fr 1fr",marginBottom:"10px",marginTop:"20px"}})(V))},706:function(e,t,a){"use strict";var n=a(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(a(10)),c=n(a(5)),o=n(a(11)),s=n(a(30)),l=n(a(14)),i=n(a(33)),u=n(a(34)),d=n(a(35)),f=n(a(0)),p=(n(a(3)),n(a(15))),h=n(a(127)),m=n(a(16)),y=n(a(88)),g={root:{display:"inline-flex",alignItems:"center",transition:"none","&:hover":{backgroundColor:"transparent"}},checked:{},disabled:{},input:{cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0}};t.styles=g;var b=function(e){function t(e){var a;return(0,s.default)(this,t),(a=(0,i.default)(this,(0,u.default)(t).call(this))).handleFocus=function(e){a.props.onFocus&&a.props.onFocus(e);var t=a.props.muiFormControl;t&&t.onFocus&&t.onFocus(e)},a.handleBlur=function(e){a.props.onBlur&&a.props.onBlur(e);var t=a.props.muiFormControl;t&&t.onBlur&&t.onBlur(e)},a.handleInputChange=function(e){var t=e.target.checked;a.isControlled||a.setState({checked:t}),a.props.onChange&&a.props.onChange(e,t)},a.isControlled=null!=e.checked,a.state={},a.isControlled||(a.state.checked=void 0!==e.defaultChecked&&e.defaultChecked),a}return(0,d.default)(t,e),(0,l.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.autoFocus,n=t.checked,s=t.checkedIcon,l=t.classes,i=t.className,u=t.defaultChecked,d=t.disabled,h=t.icon,m=t.id,g=t.inputProps,b=t.inputRef,v=t.muiFormControl,x=t.name,C=(t.onBlur,t.onChange,t.onFocus,t.readOnly),k=t.required,E=t.tabIndex,O=t.type,j=t.value,S=(0,o.default)(t,["autoFocus","checked","checkedIcon","classes","className","defaultChecked","disabled","icon","id","inputProps","inputRef","muiFormControl","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"]),_=d;v&&"undefined"===typeof _&&(_=v.disabled);var w=this.isControlled?n:this.state.checked,T="checkbox"===O||"radio"===O;return f.default.createElement(y.default,(0,r.default)({component:"span",className:(0,p.default)(l.root,(e={},(0,c.default)(e,l.checked,w),(0,c.default)(e,l.disabled,_),e),i),disabled:_,tabIndex:null,role:void 0,onFocus:this.handleFocus,onBlur:this.handleBlur},S),w?s:h,f.default.createElement("input",(0,r.default)({autoFocus:a,checked:n,defaultChecked:u,className:l.input,disabled:_,id:T&&m,name:x,onChange:this.handleInputChange,readOnly:C,ref:b,required:k,tabIndex:E,type:O,value:j},g)))}}]),t}(f.default.Component),v=(0,m.default)(g,{name:"MuiPrivateSwitchBase"})((0,h.default)(b));t.default=v},722:function(e,t,a){"use strict";var n=a(2);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}});var r=n(a(807))},743:function(e,t,a){"use strict";var n=a(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),c=(0,n(a(57)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.default.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),"Search");t.default=c},807:function(e,t,a){"use strict";var n=a(2);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.styles=void 0;var r=n(a(10)),c=n(a(11)),o=n(a(0)),s=(n(a(3)),n(a(15))),l=n(a(16)),i=a(52),u=n(a(706)),d=function(e){return{root:{display:"inline-flex",width:62,position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle"},icon:{boxShadow:e.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"},iconChecked:{boxShadow:e.shadows[2]},switchBase:{padding:0,height:48,width:48,color:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[400],transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},checked:{transform:"translateX(14px)","& + $bar":{opacity:.5}},colorPrimary:{"&$checked":{color:e.palette.primary.main,"& + $bar":{backgroundColor:e.palette.primary.main}}},colorSecondary:{"&$checked":{color:e.palette.secondary.main,"& + $bar":{backgroundColor:e.palette.secondary.main}}},disabled:{"& + $bar":{opacity:"light"===e.palette.type?.12:.1},"& $icon":{boxShadow:e.shadows[1]},"&$switchBase":{color:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[800],"& + $bar":{backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white}}},bar:{borderRadius:7,display:"block",position:"absolute",zIndex:-1,width:34,height:14,top:"50%",left:"50%",marginTop:-7,marginLeft:-17,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:"light"===e.palette.type?e.palette.common.black:e.palette.common.white,opacity:"light"===e.palette.type?.38:.3}}};function f(e){var t=e.classes,a=e.className,n=e.color,l=(0,c.default)(e,["classes","className","color"]);return o.default.createElement("span",{className:(0,s.default)(t.root,a)},o.default.createElement(u.default,(0,r.default)({type:"checkbox",icon:o.default.createElement("span",{className:t.icon}),classes:{root:(0,s.default)(t.switchBase,t["color".concat((0,i.capitalize)(n))]),checked:t.checked,disabled:t.disabled},checkedIcon:o.default.createElement("span",{className:(0,s.default)(t.icon,t.iconChecked)})},l)),o.default.createElement("span",{className:t.bar}))}t.styles=d,f.defaultProps={color:"secondary"};var p=(0,l.default)(d,{name:"MuiSwitch"})(f);t.default=p}}]);
//# sourceMappingURL=31.7af18722.chunk.js.map