(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{1573:function(t,e,n){"use strict";n.r(e);var a=n(6),r=n(7),o=n(8),i=n(9),c=n(4),s=n(0),u=n.n(s),l=n(20),d=n(26),f=n(123),p=n(622),h=n(18),m=n(17),g=n(29),b=n(46),y=n.n(b),v=n(85),_=n(647),x=n(27),j=n(637),O=n.n(j),k=n(636),E=n.n(k),R=n(648),C=n.n(R),S=n(734);function T(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(c.a)(t);if(e){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}n.n(S)()(E.a);var w=function(t){Object(o.a)(n,t);var e=T(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={loading:!0},r.setOptions.bind(Object(m.a)(r)),r}return Object(r.a)(n,[{key:"componentWillMount",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){if(!O()(this.props.data,t.data)){var e=this.setOptions();E.a.chart("chart",e)}if(!O()(this.props.selectedLanguage,t.selectedLanguage)){var n=this.setOptions();E.a.chart("chart",n)}}},{key:"setOptions",value:function(){var t=this.formatData(),e=t.boardsNames,n=t.rangeHours,a=t.averageHours,r=t.value,o=this.props.selectedLanguage;return{chart:{type:"columnrange",inverted:!0},accessibility:{description:"chart"},title:{text:x.a[o].percentageRangeChart.title},subtitle:{text:"".concat(x.a[o].percentageRangeChart.underestimation,"   |   ").concat(x.a[o].percentageRangeChart.overestimation," ")},xAxis:[{categories:e},{opposite:!0,reversed:!1,categories:e,linkedTo:0,labels:{step:1}}],yAxis:{title:{text:x.a[o].percentageRangeChart.yAxis},min:-r,max:r,marker:0},tooltip:{valueSuffix:"%"},plotOptions:{columnrange:{dataLabels:{enabled:!0,format:"{y}%"}}},legend:{enabled:!1},series:[{name:x.a[o].percentageRangeChart.percentage,colorByPoint:!0,data:n},{type:"spline",name:x.a[o].percentageRangeChart.average,data:a,lineWidth:0,marker:{radius:8,fillColor:"#ea5941"},states:{hover:{lineWidthPlus:0}}}]}}},{key:"formatData",value:function(){var t=this.props.data,e=t.boards,n={},a={},r=[],o={},i={},c=[],s=[],u=[];t.tasks.forEach(function(t){var e=(t.reported_hours-t.estimated_hours)/t.estimated_hours*100;0===parseFloat(t.estimated_hours)&&(e=100*(0-t.reported_hours)),e=parseFloat(e.toFixed(3)),i[t.board_id]||(i[t.board_id]=0),i[t.board_id]+=1,n[t.board_id]||(n[t.board_id]=e),e<n[t.board_id]&&(n[t.board_id]=e),a[t.board_id]||(a[t.board_id]=e),e>a[t.board_id]&&(a[t.board_id]=e),o[t.board_id]||(o[t.board_id]=0),o[t.board_id]+=e}),Array.from(new Set(Object.keys(o))).forEach(function(t){r.push(parseFloat((o[t]/i[t]).toFixed(3))),c.push([n[t],a[t]]);var u=e.filter(function(e){return e.id===t}).map(function(t){return t.name});s.push(u)}),u.push(0),u.push(0),c.forEach(function(t){t[1]>u[1]&&(u[1]*=0,u[1]+=t[1]),t[0]<u[0]&&(u[0]*=0,u[0]+=t[0])});var l=u[1];return-1*u[0]>u[1]&&(l=-1*u[0]),{boardsNames:s,rangeHours:c,averageHours:r,value:l}}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(h.a,null);var t=this.setOptions();return u.a.createElement("div",null,u.a.createElement("div",{id:"chart"},u.a.createElement(C.a,{highcharts:E.a,options:t})))}}]),n}(s.Component),P=Object(d.b)(function(t){return{selectedLanguage:t.user.language}})(w);function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(c.a)(t);if(e){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var L=function(t){Object(o.a)(n,t);var e=D(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={loading:!0,data:"",tasks:[]},r.changeData=r.changeData.bind(Object(m.a)(r)),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.changeData(this.props.milestone)}},{key:"changeData",value:function(t){var e=this;this.props.fetchGetMilestonesPercentageHours(t).then(function(t){t.ok?e.setState({data:t.body,tasks:t.body.tasks,loading:!1}):console.log("Bad Request")})}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(h.a,null);var t=this.state.data,e=this.props,n=e.classes,a=e.selectedLanguage;return u.a.createElement("div",{className:n.headerContainer},u.a.createElement(y.a,{className:n.title},x.a[a].tasktracking.estimatedhoursvariation),u.a.createElement("div",{className:n.line}),u.a.createElement("div",{style:{display:"flex",alignItems:"center",margin:"10px"}},u.a.createElement(y.a,{className:n.text},x.a[this.props.selectedLanguage].averageTaskTimeChart.milestoneSelection," ",this.props.milestone)),u.a.createElement("div",{className:n.line}),u.a.createElement("div",{className:n.wrapper},""!==this.state.filterOption&&""!==this.state.data&&this.state.tasks.length>0&&u.a.createElement(P,{data:t})))}}]),n}(s.Component),B=Object(d.b)(function(t){return{selectedLanguage:t.user.language}},function(t){return Object(l.b)({fetchGetMilestones:_.d,fetchGetMilestonesPercentageHours:_.f,notifyError:v.b},t)})(Object(g.withStyles)({wrapper:{height:"400px",width:"auto"},modalContent:{width:"600px",height:"400px"},modalContainer:{},title:{fontSize:"28px",fontFamiliy:'-apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "Lucida Grande", Arial, sans-serif',color:"rgb(68, 68, 68)"},headerContainer:{margin:"30px",width:"auto"},text:{color:"#2a3d41",fontSize:16,fontWeight:"bold",marginTop:"10px",marginBottom:"10px"},selectText:{color:"#2a3d41",fontSize:14,fontWeight:"normal",marginTop:"10px",marginBottom:"10px",marginLeft:"10px"},grid:{display:"flex",width:"100%",margin:"10px"},line:{width:"auto",height:"1px",backgroundColor:"#CCCCCC"},info:{color:"#2a3d41",fontSize:16,fontWeight:"bold",marginTop:"5px"},box:{display:"flex",marginRight:"10px",padding:"5px"},customIcon:{height:"24px",width:"24px",display:"block","border-radius":"50%",marginRight:"5px"},shareText:{fontSize:12,color:"white",margin:"0px 0px"},shareButton:{margin:5,padding:"0px 8px",borderColor:"white",border:"1px solid #fff",backgroundColor:"#ea5941","&:hover":{backgroundColor:"#ca3921"},color:"#fff",borderRadius:0}})(L));function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,a=Object(c.a)(t);if(e){var r=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var G=function(t){Object(o.a)(n,t);var e=F(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={loading:!0},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.props.selectProject(this.props.projectId),this.props.fetchProjectMembers(this.props.projectId).then(function(){t.setState({loading:!1})})}},{key:"render",value:function(){return this.state.loading?u.a.createElement(h.a,null):u.a.createElement(s.Fragment,null,u.a.createElement(B,{projectId:this.props.projectId,milestone:this.props.milestone}))}}]),n}(s.Component);e.default=Object(d.b)(function(t,e){return{projectId:String(e.match.params.id),milestone:String(e.match.params.milestone_id)}},function(t){return Object(l.b)({selectProject:f.d,fetchProjectMembers:p.b},t)})(G)},622:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return c}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return u});var a=n(61),r=function(t){return{type:a.c,fetch:!0,url:"/projects/".concat(t,"/members/"),params:{method:"GET"}}},o=function(t,e){return{type:a.e,fetch:!0,url:"/tasks/".concat(t,"/assign/"),params:{method:"POST",body:e}}},i=function(t,e){return{type:a.f,fetch:!0,url:"/tasks/".concat(t,"/users/").concat(e,"/unassign/"),params:{method:"DELETE"}}},c=function(t,e,n){return{type:a.g,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"PUT",body:n}}},s=function(t,e){return{type:a.b,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"DELETE"}}},u=function(t,e){return{type:a.d,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"DELETE"}}}},647:function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"h",function(){return o}),n.d(e,"i",function(){return i}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"j",function(){return l}),n.d(e,"g",function(){return d}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return p});var a=n(72),r=function(t){return{type:a.f,fetch:!0,url:"/milestones/get_milestone?project_id=".concat(t),params:{method:"GET"}}},o=function(t){return{type:a.j,fetch:!0,url:"/milestones/add_task_to_milestone?task_id=".concat(t.task_id,"&milestone_id=").concat(t.milestone_id),params:{method:"POST",body:t}}},i=function(t){return{type:a.k,fetch:!0,url:"/milestones/remove_task_from_milestone?task_id=".concat(t.task_id,"&milestone_id=").concat(t.milestone_id),params:{method:"POST",body:t}}},c=function(t){return{type:a.e,fetch:!0,url:"/milestones/get_milestone_dates?project_id=".concat(t.project_id,"&milestone_id=").concat(t.milestone_id),params:{method:"GET"}}},s=function(t){return{type:a.a,fetch:!0,url:"/milestones/create_milestone",params:{method:"POST",body:t}}},u=function(t){return{type:a.b,fetch:!0,url:"/milestones/destroy_milestone",params:{method:"DELETE",body:t}}},l=function(t){return{type:a.l,fetch:!0,url:"/milestones/update",params:{method:"POST",body:t}}},d=function(t){return{type:a.i,fetch:!0,url:"/milestones/task_list?milestone_id=".concat(t.milestone_id),params:{method:"GET"}}},f=function(t){return{type:a.g,fetch:!0,url:"/milestones/".concat(t,"/average_hours_per_board"),params:{method:"GET"}}},p=function(t){return{type:a.h,fetch:!0,url:"/milestones/".concat(t,"/percentage_difference_hours"),params:{method:"GET"}}}}}]);
//# sourceMappingURL=36.6b94bf2f.chunk.js.map