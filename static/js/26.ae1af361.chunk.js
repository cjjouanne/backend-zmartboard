(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{1575:function(t,e,r){"use strict";r.r(e);var n=r(6),a=r(7),o=r(8),c=r(9),s=r(4),i=r(0),u=r.n(i),d=r(20),p=r(26),f=r(123),l=r(622),h=r(18),m=r(17),b=r(29),g=r(46),y=r.n(g),j=r(85),E=r(638),v=r(627),k=r(27),O=r(637),x=r.n(O),T=r(636),D=r.n(T),S=r(648),P=r.n(S),w=r(734),L=r.n(w),C=r(695);function I(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Object(s.a)(t);if(e){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}L()(D.a);var R=function(t){Object(o.a)(r,t);var e=I(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).state={loading:!0},a.setOptions.bind(Object(m.a)(a)),a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"componentDidUpdate",value:function(t){if(!x()(this.props.tasks,t.tasks)){var e=this.setOptions();D.a.chart("chart",e)}if(!x()(this.props.selectedLanguage,t.selectedLanguage)){var r=this.setOptions();D.a.chart("chart",r)}}},{key:"setOptions",value:function(){var t=this.formatData(),e=t.names,r=t.tasks,n=this.props.selectedLanguage;return{chart:{type:"bar"},title:{text:k.a[n].WorkLoadChart.title},xAxis:{categories:e},yAxis:[{min:0,title:{text:k.a[n].WorkLoadChart.yAxis}}],legend:{shadow:!1},tooltip:{shared:!0},plotOptions:{bar:{grouping:!1,shadow:!1,borderWidth:0}},series:r}}},{key:"formatData",value:function(){var t=this.props,e=t.selectedLanguage,r=t.tasks,n=t.members,a=[],o={},c=[],s={},i=[];r.forEach(function(t){var e=t.assigned;if(e.length>0){var r={};r.estimated_hours=t.estimated_hours,r.name=t.name,r.hours=[],r.users=[],e.forEach(function(t){o[t]||n.forEach(function(e){e.id===t&&(o[t]=e.name,c.push(e.name))}),r.users.push(t)}),i.push(r)}});var u=Array.from(Object.keys(o));return i.forEach(function(t){u.forEach(function(e){var r=0;t.users.indexOf(e)>-1&&(r=parseFloat(t.estimated_hours)),t.hours.push(r),s[e]||(s[e]=0),s[e]+=r})}),a.push({name:k.a[e].WorkLoadChart.estimated_hours,data:Array.from(Object.values(s)),color:"#d8d8d8",pointPadding:.2,pointPlacement:-.2}),i.forEach(function(t){a.push({name:t.name,data:t.hours,pointPadding:.2,pointPlacement:-.2,stacking:"normal"})}),{names:c,tasks:a}}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(h.a,null);if(this.props.tasks.length>0){var t=this.setOptions();return u.a.createElement("div",null,u.a.createElement("div",{id:"chart"},u.a.createElement(P.a,{highcharts:D.a,options:t})))}}}]),r}(i.Component),G=Object(p.b)(function(t){return{selectedLanguage:t.user.language}},function(t){return Object(d.b)({fetchGetHours:C.c},t)})(R);function _(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Object(s.a)(t);if(e){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var B=function(t){Object(o.a)(r,t);var e=_(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).state={loading:!0,tasks:[],filterOption:"",members:[],hours:0,startDate:a.props.startDate,endDate:a.props.endDate,boardId:a.props.boardId,assigned:!1},a.changeData=a.changeData.bind(Object(m.a)(a)),a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var t=this;this.props.fetchProjectMembers(this.props.projectId).then(function(e){e.ok&&t.setState({members:e.body.members.map(function(t){return{id:t.id,name:t.name,tasks_reports:{},count:0,hours:[]}})})}),this.changeData(this.props.boardId,this.props.startDate,this.props.endDate)}},{key:"changeData",value:function(t,e,r){var n=this,a={start_date:e,end_date:r};t===this.props.projectId?this.props.fetchGetTasksProject(this.props.projectId,a).then(function(e){if(e.ok){var r=0;e.body.workload.forEach(function(t){r+=parseFloat(t.estimated_hours),t.assigned.length>0&&n.setState({assigned:!0})}),n.setState({tasks:e.body.workload,users:e.body.users,loading:!1,filterOption:t,hours:r})}}):this.props.fetchGetTasksBoard(t,a).then(function(e){if(e.ok){var r=0;e.body.tasks.forEach(function(t){r+=parseFloat(t.estimated_hours),t.assigned.length>0&&n.setState({assigned:!0})}),n.setState({tasks:e.body.tasks,users:e.body.users,loading:!1,filterOption:t,hours:r})}}),this.setState({loading:!1,filterOption:""})}},{key:"render",value:function(){if(this.state.loading)return u.a.createElement(h.a,null);var t=this.state,e=t.tasks,r=t.members,n=t.endDate,a=t.startDate,o=t.boardId,c=t.hours,s=this.props,i=s.classes,d=s.selectedLanguage,p=k.a[d].WorkLoadChart;return u.a.createElement("div",{className:i.headerContainer},u.a.createElement(y.a,{className:i.title},k.a[d].report.workload),u.a.createElement("div",{className:i.line}),u.a.createElement("div",{className:i.grid},u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:i.text},p.boardSelection,":"," ",this.props.boardId)),u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:i.text},p.from,":"," ",this.props.startDate)),u.a.createElement("div",{style:{display:"flex",alignSelf:"center",marginLeft:"10px"}},u.a.createElement(y.a,{className:i.text},p.to,":"," ",this.props.endDate))),u.a.createElement("div",{className:i.line}),u.a.createElement("div",{className:i.wrapper},e.length>0&&c>0&&u.a.createElement(G,{tasks:e,members:r,startDate:a,endDate:n,boardId:o})))}}]),r}(i.Component),N=Object(p.b)(function(t){return{filterOption:t.project.reporthoursFilterOption,selectedLanguage:t.user.language}},function(t){return Object(d.b)({fetchProjectMembers:l.b,notifyError:j.b,fetchGetTasksBoard:E.f,fetchGetTasksProject:v.e},t)})(Object(b.withStyles)({wrapper:{height:"400px",width:"auto"},modalContent:{width:"600px",height:"400px"},modalContainer:{},title:{fontSize:"28px",fontFamiliy:'-apple-system, ".SFNSText-Regular", "San Francisco", BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", "Lucida Grande", Arial, sans-serif',color:"rgb(68, 68, 68)"},headerContainer:{margin:"30px",width:"auto"},text:{color:"#2a3d41",fontSize:16,fontWeight:"bold",marginTop:"10px",marginBottom:"10px"},selectText:{color:"#2a3d41",fontSize:14,fontWeight:"normal",marginTop:"10px",marginBottom:"10px",marginLeft:"10px"},grid:{display:"flex",width:"100%",margin:"10px"},line:{width:"auto",height:"1px",backgroundColor:"#CCCCCC"},info:{color:"#2a3d41",fontSize:16,fontWeight:"bold",marginTop:"5px"},box:{display:"flex",marginRight:"10px",padding:"5px"},customIcon:{height:"24px",width:"24px",display:"block","border-radius":"50%",marginRight:"5px"}})(B));function F(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Object(s.a)(t);if(e){var a=Object(s.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(c.a)(this,r)}}var M=function(t){Object(o.a)(r,t);var e=F(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).state={loading:!0},a}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var t=this;this.props.selectProject(this.props.projectId),this.props.fetchProjectMembers(this.props.projectId).then(function(){t.setState({loading:!1})})}},{key:"render",value:function(){return this.state.loading?u.a.createElement(h.a,null):u.a.createElement(i.Fragment,null,u.a.createElement(N,{projectId:this.props.projectId,startDate:this.props.startDate,endDate:this.props.endDate,boardId:this.props.boardId}))}}]),r}(i.Component);e.default=Object(p.b)(function(t,e){return{projectId:String(e.match.params.id),startDate:String(e.match.params.start_date),endDate:String(e.match.params.end_date),boardId:String(e.match.params.board_id)}},function(t){return Object(d.b)({selectProject:f.d,fetchProjectMembers:l.b},t)})(M)},622:function(t,e,r){"use strict";r.d(e,"b",function(){return a}),r.d(e,"d",function(){return o}),r.d(e,"e",function(){return c}),r.d(e,"f",function(){return s}),r.d(e,"a",function(){return i}),r.d(e,"c",function(){return u});var n=r(61),a=function(t){return{type:n.c,fetch:!0,url:"/projects/".concat(t,"/members/"),params:{method:"GET"}}},o=function(t,e){return{type:n.e,fetch:!0,url:"/tasks/".concat(t,"/assign/"),params:{method:"POST",body:e}}},c=function(t,e){return{type:n.f,fetch:!0,url:"/tasks/".concat(t,"/users/").concat(e,"/unassign/"),params:{method:"DELETE"}}},s=function(t,e,r){return{type:n.g,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"PUT",body:r}}},i=function(t,e){return{type:n.b,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"DELETE"}}},u=function(t,e){return{type:n.d,fetch:!0,url:"/projects/".concat(t,"/members/").concat(e,"/"),params:{method:"DELETE"}}}},627:function(t,e,r){"use strict";r.d(e,"c",function(){return o}),r.d(e,"d",function(){return c}),r.d(e,"a",function(){return s}),r.d(e,"b",function(){return i}),r.d(e,"m",function(){return u}),r.d(e,"n",function(){return d}),r.d(e,"l",function(){return p}),r.d(e,"f",function(){return f}),r.d(e,"o",function(){return l}),r.d(e,"h",function(){return h}),r.d(e,"i",function(){return m}),r.d(e,"g",function(){return b}),r.d(e,"j",function(){return g}),r.d(e,"k",function(){return y}),r.d(e,"e",function(){return j});var n=r(1),a=r(62),o=function(t){return{type:a.d,fetch:!0,url:"/projects/".concat(t,"/"),params:{method:"GET"}}},c=function(){return{type:a.c,fetch:!0,url:"/projects/",params:{method:"GET"}}},s=function(t){return{type:a.a,fetch:!0,url:"/projects/",params:{method:"POST",body:t}}},i=function(t){return{type:a.b,fetch:!0,url:"/projects/".concat(t,"/"),params:{method:"DELETE"}}},u=function(t,e){return{type:a.m,fetch:!0,url:"/projects/".concat(t,"/"),params:{method:"PUT",body:e}}},d=function(t,e){return{type:a.o,fetch:!0,url:"/projects/".concat(t,"/order/"),params:{method:"PUT",body:e}}},p=function(t){return{type:a.n,fetch:!0,url:"/projects/".concat(t,"/favorite/"),params:{method:"PUT"}}},f=function(t){return{type:a.f,fetch:!0,url:"/projects/".concat(t,"/gits/new/"),params:{method:"GET"}}},l=function(t,e){return{type:a.e,fetch:!0,url:"/projects/".concat(t,"/gits/link/"),params:{method:"POST",body:e}}},h=function(t){return{type:a.h,fetch:!0,url:"/projects/".concat(t,"/gits/repos/"),params:{method:"GET"}}},m=function(t){return{type:a.i,fetch:!0,url:"/projects/".concat(t,"/repos/"),params:{method:"GET"}}},b=function(t){return{type:a.g,fetch:!0,url:"/projects/".concat(t,"/gits"),params:{method:"DELETE"}}},g=function(t,e){return{type:a.j,fetch:!0,url:"/projects/".concat(t,"/gits/link_repo"),params:{method:"POST",body:e}}},y=function(t,e){return{type:a.k,fetch:!0,url:"/projects/".concat(t,"/repos/").concat(e),params:{method:"DELETE"}}},j=function(t,e){return{type:a.l,fetch:!0,url:"/projects/".concat(t,"/workload"),params:{method:"GET"},queryParams:Object(n.a)({},e)}}},638:function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"d",function(){return c}),r.d(e,"c",function(){return s}),r.d(e,"g",function(){return i}),r.d(e,"b",function(){return u}),r.d(e,"e",function(){return d}),r.d(e,"f",function(){return p});var n=r(1),a=r(92),o=function(t){return{type:a.a,fetch:!0,url:"/boards/",params:{method:"POST",body:t}}},c=function(t){return{type:a.d,fetch:!0,url:"/projects/".concat(t,"/boards"),params:{method:"GET"}}},s=function(){return{type:a.c,fetch:!0,url:"/boards",params:{method:"GET"}}},i=function(t,e){return{type:a.g,fetch:!0,url:"/boards/".concat(t,"/"),params:{method:"PUT",body:e}}},u=function(t){return{type:a.b,fetch:!0,url:"/boards/".concat(t,"/"),params:{method:"DELETE"}}},d=function(t,e){return{type:a.e,fetch:!0,url:"/boards/".concat(t,"/reported_tasks_between_dates"),params:{method:"GET"},queryParams:Object(n.a)({},e)}},p=function(t,e){return{type:a.f,fetch:!0,url:"/boards/".concat(t,"/tasks_between_dates"),params:{method:"GET"},queryParams:Object(n.a)({},e)}}},695:function(t,e,r){"use strict";r.d(e,"c",function(){return a}),r.d(e,"a",function(){return o}),r.d(e,"b",function(){return c});var n=r(98),a=function(t){return{type:n.c,fetch:!0,url:"/tasks/".concat(t,"/hours"),params:{method:"GET"}}},o=function(t,e){return{type:n.a,fetch:!0,url:"/tasks/".concat(t,"/hours"),params:{method:"POST",body:e}}},c=function(t){return{type:n.b,fetch:!0,url:"/hours/".concat(t),params:{method:"DELETE"}}}}}]);
//# sourceMappingURL=26.ae1af361.chunk.js.map